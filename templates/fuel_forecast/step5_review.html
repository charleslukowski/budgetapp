{% extends "fuel_forecast/_layout.html" %}

{% block step_content %}
<div class="step-card">
    <div class="step-card-header">
        <h2>Step 8: Review & Save</h2>
        <p>Review your inputs, calculate the forecast, and save when ready.</p>
    </div>
    
    <form method="POST" action="/fuel-forecast/{{ session_id }}/step/8">
        <div class="step-card-body">
            {% if calculated %}
            <!-- Results Section (shown after calculation) -->
            <div class="form-section">
                {% if saved %}
                <div style="padding: 16px; background: #d1fae5; border: 1px solid #10b981; border-radius: 8px; margin-bottom: 16px; display: flex; align-items: center; gap: 12px;">
                    <span style="font-size: 24px;">‚úì</span>
                    <div>
                        <strong style="color: #059669;">Forecast Saved Successfully</strong>
                        <div style="font-size: 13px; color: #047857;">Scenario "{{ scenario_name }}" has been saved to the database.</div>
                    </div>
                </div>
                {% endif %}
                
                <div style="padding: 24px; background: linear-gradient(135deg, #059669 0%, #047857 100%); border-radius: 12px; color: white; margin-bottom: 24px;">
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 4px;">Total Fuel Cost ({{ year }})</div>
                            <div style="font-size: 36px; font-weight: 700;">${{ "{:,.0f}".format(results.total_cost / 1000000) }}M</div>
                        </div>
                        <div style="text-align: right;">
                            <div style="font-size: 14px; opacity: 0.9; margin-bottom: 4px;">Cost per MWh</div>
                            <div style="font-size: 28px; font-weight: 600;">${{ "%.2f"|format(results.cost_per_mwh) }}</div>
                        </div>
                    </div>
                    <div style="display: flex; gap: 32px; margin-top: 16px; padding-top: 16px; border-top: 1px solid rgba(255,255,255,0.2);">
                        <div>
                            <span style="opacity: 0.8; font-size: 13px;">Total Generation:</span>
                            <span style="font-weight: 600; margin-left: 8px;">{{ "{:,.0f}".format(results.total_mwh / 1000) }} GWh</span>
                        </div>
                        <div>
                            <span style="opacity: 0.8; font-size: 13px;">Capacity Factor:</span>
                            <span style="font-weight: 600; margin-left: 8px;">{{ "%.1f"|format(results.capacity_factor) }}%</span>
                        </div>
                    </div>
                </div>
                
                <!-- Plant Breakdown -->
                {% if results.kyger and results.clifty %}
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Plant Breakdown</span>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td></td>
                            <td class="value" style="font-weight: 600;">Kyger Creek</td>
                            <td class="value" style="font-weight: 600;">Clifty Creek</td>
                        </tr>
                        <tr>
                            <td>Generation</td>
                            <td class="value">{{ "{:,.0f}".format(results.kyger.total_mwh / 1000) }} GWh</td>
                            <td class="value">{{ "{:,.0f}".format(results.clifty.total_mwh / 1000) }} GWh</td>
                        </tr>
                        <tr>
                            <td>Coal Consumed</td>
                            <td class="value">{{ "{:,.0f}".format(results.kyger.total_coal_tons) }} tons</td>
                            <td class="value">{{ "{:,.0f}".format(results.clifty.total_coal_tons) }} tons</td>
                        </tr>
                        <tr>
                            <td>Fuel Cost</td>
                            <td class="value">${{ "{:,.0f}".format(results.kyger.total_fuel_cost / 1000000) }}M</td>
                            <td class="value">${{ "{:,.0f}".format(results.clifty.total_fuel_cost / 1000000) }}M</td>
                        </tr>
                        <tr>
                            <td>Avg $/MWh</td>
                            <td class="value">${{ "%.2f"|format(results.kyger.avg_fuel_cost_per_mwh) }}</td>
                            <td class="value">${{ "%.2f"|format(results.clifty.avg_fuel_cost_per_mwh) }}</td>
                        </tr>
                    </table>
                </div>
                {% endif %}
                
                <!-- Monthly Breakdown (Collapsible) -->
                {% if monthly_results %}
                <details class="summary-card" style="cursor: pointer;">
                    <summary class="summary-card-header" style="list-style: none;">
                        <span class="summary-card-title">Monthly Detail</span>
                        <span style="font-size: 12px; color: #6b7280;">Click to expand</span>
                    </summary>
                    <div style="margin-top: 12px; overflow-x: auto;">
                        <table class="monthly-table">
                            <thead>
                                <tr>
                                    <th>Month</th>
                                    <th>MWh</th>
                                    <th>Coal</th>
                                    <th>Reagents</th>
                                    <th style="color: #059669;">BP Sales</th>
                                    <th style="color: #dc2626;">BP Costs</th>
                                    <th>BP Net</th>
                                    <th>Total</th>
                                    <th>$/MWh</th>
                                </tr>
                            </thead>
                            <tbody>
                                {% for m in monthly_results %}
                                <tr>
                                    <td>{{ ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][m.month - 1] }}</td>
                                    <td>{{ "{:,.0f}".format(m.mwh / 1000) }}k</td>
                                    <td>${{ "{:,.1f}".format(m.coal_cost / 1000000) }}M</td>
                                    <td>${{ "{:,.1f}".format(m.consumables_cost / 1000000) }}M</td>
                                    <td style="color: #059669;">
                                        +${{ "{:,.0f}".format(-m.byproduct_sales_revenue / 1000) }}k
                                    </td>
                                    <td style="color: #dc2626;">
                                        ${{ "{:,.0f}".format((m.byproduct_disposal_costs + m.byproduct_misc_expense) / 1000) }}k
                                    </td>
                                    <td style="color: {% if m.byproduct_net < 0 %}#059669{% else %}#dc2626{% endif %}">
                                        {{ "{:,.0f}".format(m.byproduct_net / 1000) }}k
                                    </td>
                                    <td style="font-weight: 600;">${{ "{:,.1f}".format(m.total_cost / 1000000) }}M</td>
                                    <td>${{ "%.2f"|format(m.cost_per_mwh) }}</td>
                                </tr>
                                {% endfor %}
                            </tbody>
                        </table>
                    </div>
                </details>
                {% endif %}
                
                <!-- Variance Waterfall Chart (if prior comparison available) -->
                {% if prior_comparison %}
                <details class="summary-card" style="cursor: pointer;">
                    <summary class="summary-card-header" style="list-style: none;">
                        <span class="summary-card-title">Variance from Prior Forecast</span>
                        <span style="font-size: 12px; color: #6b7280;">Click to expand</span>
                    </summary>
                    <div style="margin-top: 16px;">
                        <!-- Summary of variance -->
                        <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 16px; margin-bottom: 20px;">
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 12px; color: #64748b;">Prior Forecast</div>
                                <div style="font-size: 20px; font-weight: 600; color: #374151;">
                                    ${{ "{:,.0f}".format(prior_comparison.prior_cost / 1000000) }}M
                                </div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: #f8fafc; border-radius: 8px;">
                                <div style="font-size: 12px; color: #64748b;">Current Forecast</div>
                                <div style="font-size: 20px; font-weight: 600; color: #374151;">
                                    ${{ "{:,.0f}".format(results.total_cost / 1000000) }}M
                                </div>
                            </div>
                            <div style="text-align: center; padding: 12px; background: {% if prior_comparison.variance > 0 %}#fef2f2{% else %}#f0fdf4{% endif %}; border-radius: 8px;">
                                <div style="font-size: 12px; color: #64748b;">Variance</div>
                                <div style="font-size: 20px; font-weight: 600; color: {% if prior_comparison.variance > 0 %}#dc2626{% else %}#059669{% endif %};">
                                    {{ "{:+,.0f}".format(prior_comparison.variance / 1000000) }}M
                                </div>
                            </div>
                        </div>
                        
                        <!-- Waterfall chart -->
                        <div style="height: 280px; position: relative;">
                            <canvas id="varianceWaterfallChart"></canvas>
                        </div>
                        
                        <div style="display: flex; justify-content: center; gap: 24px; margin-top: 12px; padding-top: 12px; border-top: 1px solid #e5e7eb;">
                            <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #64748b;">
                                <div style="width: 16px; height: 16px; background: #2d4a6f; border-radius: 4px;"></div>
                                <span>Base / Result</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #64748b;">
                                <div style="width: 16px; height: 16px; background: #ef4444; border-radius: 4px;"></div>
                                <span>Cost Increase</span>
                            </div>
                            <div style="display: flex; align-items: center; gap: 8px; font-size: 13px; color: #64748b;">
                                <div style="width: 16px; height: 16px; background: #22c55e; border-radius: 4px;"></div>
                                <span>Cost Decrease</span>
                            </div>
                        </div>
                    </div>
                </details>
                <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
                <script>
                (function() {
                    const waterfallData = {{ waterfall_data|safe }};
                    const ctx = document.getElementById('varianceWaterfallChart').getContext('2d');
                    
                    if (!waterfallData || waterfallData.length === 0) return;
                    
                    const labels = waterfallData.map(d => d.label);
                    const barData = [];
                    const backgroundColors = [];
                    let runningTotal = 0;
                    
                    waterfallData.forEach((item, index) => {
                        if (index === 0) {
                            barData.push([0, item.value / 1000000]);
                            backgroundColors.push('#2d4a6f');
                            runningTotal = item.value;
                        } else if (index === waterfallData.length - 1) {
                            barData.push([0, item.value / 1000000]);
                            backgroundColors.push('#2d4a6f');
                        } else {
                            const start = runningTotal / 1000000;
                            const end = (runningTotal + item.value) / 1000000;
                            barData.push([Math.min(start, end), Math.max(start, end)]);
                            backgroundColors.push(item.value >= 0 ? '#ef4444' : '#22c55e');
                            runningTotal += item.value;
                        }
                    });
                    
                    new Chart(ctx, {
                        type: 'bar',
                        data: {
                            labels: labels,
                            datasets: [{
                                data: barData,
                                backgroundColor: backgroundColors,
                                borderRadius: 4,
                                borderSkipped: false,
                            }]
                        },
                        options: {
                            responsive: true,
                            maintainAspectRatio: false,
                            plugins: {
                                legend: { display: false },
                                tooltip: {
                                    callbacks: {
                                        label: function(context) {
                                            const dataIndex = context.dataIndex;
                                            const rawValue = waterfallData[dataIndex].value / 1000000;
                                            if (dataIndex === 0 || dataIndex === waterfallData.length - 1) {
                                                return 'Total: $' + rawValue.toFixed(1) + 'M';
                                            }
                                            return (rawValue >= 0 ? '+' : '') + '$' + rawValue.toFixed(1) + 'M';
                                        }
                                    }
                                }
                            },
                            scales: {
                                x: { grid: { display: false } },
                                y: {
                                    title: { display: true, text: 'Cost ($M)' },
                                    grid: { color: 'rgba(0,0,0,0.05)' }
                                }
                            }
                        }
                    });
                })();
                </script>
                {% endif %}
                
                {% if not saved %}
                <!-- Save Options -->
                <div class="form-section-title" style="margin-top: 24px;">Save Forecast</div>
                <div class="form-group">
                    <label for="scenario_name">Scenario Name</label>
                    <input type="text" name="scenario_name" id="scenario_name" 
                           class="form-control" 
                           value="{{ scenario_name }}"
                           placeholder="e.g., 2025 December Forecast - Base Case">
                </div>
                <div class="form-group">
                    <label for="notes">Notes</label>
                    <textarea name="notes" id="notes" class="form-control" rows="3" 
                              placeholder="Optional notes about this forecast...">{{ notes }}</textarea>
                </div>
                {% endif %}
            </div>
            {% else %}
            <!-- Summary Section (before calculation) -->
            <div class="form-section">
                <div class="form-section-title">Configuration Summary</div>
                
                <!-- Start Point -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Start Point</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/1" class="edit-link">Edit</a>
                    </div>
                    <div class="summary-row">
                        Mode: <strong>{{ summary.start_mode|replace('_', ' ')|title }}</strong>
                        {% if summary.base_scenario != 'None' %}
                        | Base: <strong>{{ summary.base_scenario }}</strong>
                        {% endif %}
                        | As of: <strong>{{ summary.as_of_date }}</strong>
                    </div>
                </div>
                
                <!-- Inventory -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Coal Inventory</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/2" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>KC Beginning</td>
                            <td class="value">{{ "{:,.0f}".format(summary.inventory.kc_beginning) }} tons</td>
                            <td>Target Level</td>
                            <td class="value">{{ summary.inventory.target_days }} days</td>
                        </tr>
                        <tr>
                            <td>CC Beginning</td>
                            <td class="value">{{ "{:,.0f}".format(summary.inventory.cc_beginning) }} tons</td>
                            <td>Contracted Deliveries</td>
                            <td class="value">{{ "{:,.0f}".format(summary.inventory.contracted_tons) }} tons/mo</td>
                        </tr>
                    </table>
                </div>
                
                <!-- Coal Prices & Blend -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Coal Prices & Blend</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/2" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>Eastern (NAPP)</td>
                            <td class="value">${{ "%.2f"|format(summary.coal_prices.eastern) }}/ton</td>
                            <td>Blend</td>
                            <td class="value">{{ summary.coal_blend.eastern_pct }}%</td>
                        </tr>
                        <tr>
                            <td>Illinois Basin</td>
                            <td class="value">${{ "%.2f"|format(summary.coal_prices.ilb) }}/ton</td>
                            <td>Blend</td>
                            <td class="value">{{ summary.coal_blend.ilb_pct }}%</td>
                        </tr>
                        <tr>
                            <td>PRB</td>
                            <td class="value">${{ "%.2f"|format(summary.coal_prices.prb) }}/ton</td>
                            <td>Blend</td>
                            <td class="value">{{ summary.coal_blend.prb_pct }}%</td>
                        </tr>
                    </table>
                </div>
                
                <!-- Transportation -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Transportation</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/2" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>Ohio River Barge</td>
                            <td class="value">${{ "%.2f"|format(summary.transportation.barge_ohio) }}/ton</td>
                            <td>Upper Ohio Barge</td>
                            <td class="value">${{ "%.2f"|format(summary.transportation.barge_upper_ohio) }}/ton</td>
                        </tr>
                        <tr>
                            <td>PRB Rail</td>
                            <td class="value">${{ "%.2f"|format(summary.transportation.rail_prb) }}/ton</td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
                
                <!-- Generation & Use Factors (from use_factor_inputs table) -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Generation Profile</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/4" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>KC Capacity</td>
                            <td class="value">{{ "{:,.0f}".format(summary.generation.capacity_kc) }} MW</td>
                            <td>KC Use Factor (avg)</td>
                            <td class="value">{{ "%.1f"|format(summary.generation.use_factor_kc) }}%</td>
                        </tr>
                        <tr>
                            <td>CC Capacity</td>
                            <td class="value">{{ "{:,.0f}".format(summary.generation.capacity_cc) }} MW</td>
                            <td>CC Use Factor (avg)</td>
                            <td class="value">{{ "%.1f"|format(summary.generation.use_factor_cc) }}%</td>
                        </tr>
                        <tr>
                            <td>Target CF</td>
                            <td class="value">{{ summary.generation.capacity_factor_target }}%</td>
                            <td>CC Unit 6 Ozone (avg)</td>
                            <td class="value">{{ "%.1f"|format(summary.generation.unit6_ozone_factor) }}%</td>
                        </tr>
                    </table>
                </div>
                
                <!-- Heat Rates (from heat_rate_inputs table) -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Heat Rates</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/5" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>KC Baseline</td>
                            <td class="value">{{ "{:,.0f}".format(summary.heat_rates.kc_baseline) }} BTU/kWh</td>
                            <td>SUF Correction</td>
                            <td class="value">{{ summary.heat_rates.suf_correction }} BTU/kWh</td>
                        </tr>
                        <tr>
                            <td>CC Baseline</td>
                            <td class="value">{{ "{:,.0f}".format(summary.heat_rates.cc_baseline) }} BTU/kWh</td>
                            <td>PRB Penalty</td>
                            <td class="value">{{ summary.heat_rates.prb_penalty }} BTU/kWh/%</td>
                        </tr>
                    </table>
                </div>
                
                <!-- Outages (from unit_outage_inputs table) & Deductions -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Outages & Deductions</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/6" class="edit-link">Edit Outages</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>KC Planned Outage</td>
                            <td class="value">{{ "%.0f"|format(summary.outages.kc_planned_days) }} days</td>
                            <td>CC Planned Outage</td>
                            <td class="value">{{ "%.0f"|format(summary.outages.cc_planned_days) }} days</td>
                        </tr>
                        <tr>
                            <td>KC Forced Outage (Est.)</td>
                            <td class="value">{{ "%.0f"|format(summary.outages.kc_forced_days) }} days</td>
                            <td>CC Forced Outage (Est.)</td>
                            <td class="value">{{ "%.0f"|format(summary.outages.cc_forced_days) }} days</td>
                        </tr>
                        <tr>
                            <td>FGD Aux Load</td>
                            <td class="value">{{ summary.deductions.fgd_aux_pct }}%</td>
                            <td>GSU Losses</td>
                            <td class="value">{{ summary.deductions.gsu_loss_pct }}%</td>
                        </tr>
                        <tr>
                            <td>Reserve</td>
                            <td class="value">{{ summary.deductions.reserve_mw }} MW</td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
                
                <!-- Escalation -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Escalation Factors</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/7" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>Coal Price</td>
                            <td class="value">{{ summary.escalation.coal }}%/yr</td>
                            <td>Transportation</td>
                            <td class="value">{{ summary.escalation.transport }}%/yr</td>
                        </tr>
                        <tr>
                            <td>Reagent/Consumables</td>
                            <td class="value">{{ summary.escalation.reagent }}%/yr</td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
                
                <!-- Keep Prior Values -->
                <div class="summary-card">
                    <div class="summary-card-header">
                        <span class="summary-card-title">Other Costs</span>
                        <a href="/fuel-forecast/{{ session_id }}/step/7" class="edit-link">Edit</a>
                    </div>
                    <table class="summary-table">
                        <tr>
                            <td>Reagent Costs</td>
                            <td class="value">
                                {% if summary.keep_prior.reagents %}
                                <span class="badge badge-info">Using Prior Values</span>
                                {% else %}
                                <span class="badge badge-changed">Custom Values</span>
                                {% endif %}
                            </td>
                            <td>Byproduct Revenue</td>
                            <td class="value">
                                {% if summary.keep_prior.byproducts %}
                                <span class="badge badge-info">Using Prior Values</span>
                                {% else %}
                                <span class="badge badge-changed">Custom Values</span>
                                {% endif %}
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
            {% endif %}
        </div>
        
    <div class="step-actions">
        <a href="/fuel-forecast/{{ session_id }}/step/7" class="btn btn-secondary">
            ‚Üê Back to Other Costs
        </a>
        <div style="display: flex; gap: 12px;">
            {% if saved %}
            <a href="/fuel-forecast/{{ session_id }}/multi-year" class="btn btn-secondary">
                üìà Multi-Year Projection
            </a>
            <a href="/fuel-forecast/{{ session_id }}/compare" class="btn btn-secondary">
                ‚öñÔ∏è Compare Scenarios
            </a>
            <a href="/energy-summary/{{ year }}" class="btn btn-primary">
                View Energy Summary ‚Üí
            </a>
            {% elif calculated %}
            <a href="/fuel-forecast/{{ session_id }}/step/8" class="btn btn-secondary">
                ‚Ü∫ Recalculate
            </a>
            <a href="/fuel-forecast/{{ session_id }}/multi-year" class="btn btn-outline" 
               style="border: 1px solid #d1d5db; background: white; color: #374151;">
                üìà Multi-Year
            </a>
            <button type="submit" class="btn btn-success" name="action" value="save">
                üíæ Save Forecast
            </button>
            {% else %}
            <button type="submit" class="btn btn-primary" name="action" value="calculate">
                üßÆ Calculate Forecast
            </button>
            {% endif %}
        </div>
    </div>
    </form>
</div>

<style>
.summary-card {
    padding: 16px;
    background: #f8fafc;
    border-radius: 8px;
    margin-bottom: 12px;
}

.summary-card-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 12px;
}

.summary-card-title {
    font-weight: 600;
    color: #374151;
}

.edit-link {
    font-size: 13px;
    color: #2d4a6f;
    text-decoration: none;
}

.edit-link:hover {
    text-decoration: underline;
}

.summary-row {
    font-size: 14px;
    color: #6b7280;
}

.summary-table {
    width: 100%;
    font-size: 14px;
    border-collapse: collapse;
}

.summary-table td {
    padding: 6px 0;
    color: #6b7280;
}

.summary-table td.value {
    font-weight: 500;
    color: #1f2937;
    text-align: right;
    padding-right: 24px;
}

.summary-table td:nth-child(3) {
    padding-left: 24px;
}

.badge {
    display: inline-block;
    padding: 2px 8px;
    border-radius: 4px;
    font-size: 12px;
    font-weight: 500;
}

.badge-info {
    background: #e8eef5;
    color: #1e3a5f;
}

.badge-changed {
    background: #fef3c7;
    color: #92400e;
}

.monthly-table {
    width: 100%;
    font-size: 13px;
    border-collapse: collapse;
}

.monthly-table th,
.monthly-table td {
    padding: 8px 12px;
    text-align: right;
    border-bottom: 1px solid #e5e7eb;
}

.monthly-table th {
    background: #f3f4f6;
    font-weight: 600;
    color: #374151;
}

.monthly-table th:first-child,
.monthly-table td:first-child {
    text-align: left;
}

.monthly-table tbody tr:hover {
    background: #f9fafb;
}

details.summary-card > summary {
    display: flex;
    justify-content: space-between;
    align-items: center;
}

details.summary-card > summary::-webkit-details-marker {
    display: none;
}
</style>
{% endblock %}
